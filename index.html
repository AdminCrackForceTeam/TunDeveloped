<!DOCTYPE html>
<html lang="vi">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Há»‡ Thá»‘ng Tráº¯c Nghiá»‡m</title>
<style>
body{margin:0;font-family:Arial;background:linear-gradient(135deg,#2196f3,#00bcd4);}
.box{max-width:900px;margin:20px auto;background:#fff;padding:20px;border-radius:12px;box-shadow:0 4px 15px rgba(0,0,0,.3);}
h2{text-align:center;color:#1565c0}
button{width:100%;padding:12px;border:none;border-radius:8px;background:#1e88e5;color:white;font-size:16px;margin-top:8px;cursor:pointer}
input,select{width:100%;padding:8px;margin:5px 0}
.answer{border:1px solid #ccc;padding:10px;margin:6px 0;border-radius:6px;cursor:pointer}
.answer:hover{background:#e3f2fd}
.correct{background:#43a047;color:white}
.wrong{background:#e53935;color:white}
.progress{height:8px;background:#ddd;border-radius:6px;overflow:hidden}
.bar{height:100%;background:#1e88e5;width:0%}
.hidden{display:none}
.list{background:#f5f5f5;padding:8px;margin:6px 0;border-radius:6px;display:flex;justify-content:space-between;align-items:center}
</style>
</head>
<body>

<!-- MENU -->
<div class="box" id="menu">
<h2>ğŸ“˜ Há»† THá»NG TRáº®C NGHIá»†M</h2>
<button onclick="loginTeacher()">ğŸ§‘â€ğŸ« GIÃO VIÃŠN</button>
<button onclick="openStudent()">ğŸ‘¨â€ğŸ“ Há»ŒC SINH</button>
</div>

<!-- ÄÄ‚NG NHáº¬P GIÃO VIÃŠN -->
<div class="box hidden" id="login">
<h2>ğŸ”’ ÄÄƒng nháº­p giÃ¡o viÃªn</h2>
<input type="password" id="pwd" placeholder="Nháº­p máº­t kháº©u giÃ¡o viÃªn">
<button onclick="checkPwd()">ÄÄƒng nháº­p</button>
<button onclick="backMenu()">â¬… Quay láº¡i MENU</button>
</div>

<!-- GIÃO VIÃŠN -->
<div class="box hidden" id="teacher">
<h2>ğŸ§‘â€ğŸ« SOáº N Äá»€</h2>
<select id="subject">
<option value="toan">ğŸ“˜ ToÃ¡n</option>
<option value="nguvan">ğŸ“• Ngá»¯ VÄƒn</option>
<option value="hoa">ğŸ“— HÃ³a</option>
<option value="sinh">ğŸ“™ Sinh</option>
<option value="su">ğŸ““ Sá»­</option>
<option value="dia">ğŸ“” Äá»‹a</option>
<option value="vatly">ğŸ“’ Váº­t LÃ½</option>
</select>
<input id="q" placeholder="Nháº­p cÃ¢u há»i">
<input id="a1" placeholder="ÄÃ¡p Ã¡n A">
<input id="a2" placeholder="ÄÃ¡p Ã¡n B">
<input id="a3" placeholder="ÄÃ¡p Ã¡n C">
<input id="a4" placeholder="ÄÃ¡p Ã¡n D">
<select id="correct">
<option value="0">ÄÃºng: A</option>
<option value="1">ÄÃºng: B</option>
<option value="2">ÄÃºng: C</option>
<option value="3">ÄÃºng: D</option>
</select>
<button onclick="addQuestion()">â• LÆ°u cÃ¢u há»i</button>
<button onclick="loadList()">ğŸ“„ Xem / XoÃ¡ cÃ¢u há»i</button>
<button onclick="backMenu()">â¬… Quay láº¡i MENU</button>
<div id="list"></div>
</div>

<!-- Há»ŒC SINH -->
<div class="box hidden" id="student">
<h2>ğŸ“˜ LÃ€M BÃ€I</h2>
<select id="subChoose">
<option value="toan">ğŸ“˜ ToÃ¡n</option>
<option value="nguvan">ğŸ“• Ngá»¯ VÄƒn</option>
<option value="hoa">ğŸ“— HÃ³a</option>
<option value="sinh">ğŸ“™ Sinh</option>
<option value="su">ğŸ““ Sá»­</option>
<option value="dia">ğŸ“” Äá»‹a</option>
<option value="vatly">ğŸ“’ Váº­t LÃ½</option>
</select>
<button onclick="startQuiz()">â–¶ Báº¯t Ä‘áº§u</button>
<div class="progress"><div class="bar" id="bar"></div></div>
<div id="quiz"></div>
<button onclick="next()">Tiáº¿p theo</button>
<div id="result"></div>
<button class="hidden" id="backStudent" onclick="backMenu()">â¬… Quay láº¡i MENU</button>
</div>

<audio id="ting" src="https://www.soundjay.com/buttons/sounds/button-3.mp3"></audio>
<audio id="wrong" src="https://www.soundjay.com/buttons/sounds/button-10.mp3"></audio>

<script>
const teacherPwd="123456"; // Máº­t kháº©u giÃ¡o viÃªn
let questions=[],i=0,score=0,selected=-1;

// ===== MENU =====
function backMenu(){
    menu.classList.remove("hidden");
    login.classList.add("hidden");
    teacher.classList.add("hidden");
    student.classList.add("hidden");
    document.getElementById("result").innerHTML="";
    document.getElementById("quiz").innerHTML="";
    document.getElementById("bar").style.width="0%";
}

// ===== GIÃO VIÃŠN =====
function loginTeacher(){
    menu.classList.add("hidden");
    login.classList.remove("hidden");
}
function checkPwd(){
    if(document.getElementById("pwd").value===teacherPwd){
        login.classList.add("hidden");
        teacher.classList.remove("hidden");
        document.getElementById("pwd").value="";
    }else{
        alert("Sai máº­t kháº©u!");
    }
}

function getData(){
    let sub=document.getElementById("subject").value;
    return JSON.parse(localStorage.getItem("quiz_"+sub)||"[]");
}
function saveData(data){
    let sub=document.getElementById("subject").value;
    localStorage.setItem("quiz_"+sub,JSON.stringify(data));
}

function addQuestion(){
    let data=getData();
    let qVal=document.getElementById("q").value;
    let a1Val=document.getElementById("a1").value;
    let a2Val=document.getElementById("a2").value;
    let a3Val=document.getElementById("a3").value;
    let a4Val=document.getElementById("a4").value;
    if(!qVal || !a1Val || !a2Val || !a3Val || !a4Val){alert("Vui lÃ²ng nháº­p Ä‘áº§y Ä‘á»§!"); return;}
    data.push({q:qVal,a:[a1Val,a2Val,a3Val,a4Val],c:parseInt(document.getElementById("correct").value)});
    saveData(data);
    alert("ÄÃ£ lÆ°u!");
    document.getElementById("q").value=document.getElementById("a1").value=document.getElementById("a2").value=document.getElementById("a3").value=document.getElementById("a4").value="";
}

function loadList(){
    let data=getData();
    let listDiv=document.getElementById("list");
    listDiv.innerHTML="";
    if(data.length===0){listDiv.innerHTML="ChÆ°a cÃ³ cÃ¢u há»i!"; return;}
    data.forEach((x,index)=>{
        let div=document.createElement("div");
        div.className="list";
        div.innerHTML=`<span>${index+1}. ${x.q}</span><button onclick="del(${index})">âŒ XoÃ¡</button>`;
        listDiv.appendChild(div);
    });
}

function del(index){
    let data=getData();
    data.splice(index,1);
    saveData(data);
    loadList();
}

// ===== Há»ŒC SINH =====
function startQuiz(){
    let sub=document.getElementById("subChoose").value;
    questions=JSON.parse(localStorage.getItem("quiz_"+sub)||"[]");
    if(questions.length===0){alert("ChÆ°a cÃ³ Ä‘á»!"); return;}
    i=0;score=0;selected=-1;
    document.getElementById("backStudent").classList.add("hidden");
    loadQ();
}

function loadQ(){
    let q=questions[i];
    let quizDiv=document.getElementById("quiz");
    quizDiv.innerHTML=`<b>CÃ¢u ${i+1}: ${q.q}</b>`;
    q.a.forEach((x,j)=>{quizDiv.innerHTML+=`<div class="answer" onclick="choose(${j},this)">${x}</div>`;});
    document.getElementById("bar").style.width=(i/questions.length*100)+"%";
}

function choose(j,el){
    selected=j;
    document.querySelectorAll(".answer").forEach(e=>e.classList.remove("active"));
    el.classList.add("active");
}

function next(){
    if(selected===-1){alert("Chá»n Ä‘Ã¡p Ã¡n!"); return;}
    let q=questions[i];
    let ans=document.querySelectorAll(".answer");
    if(selected===q.c){ans[selected].classList.add("correct"); ting.play(); score++;}
    else{ans[selected].classList.add("wrong"); wrong.play();}
    setTimeout(()=>{
        i++; selected=-1;
        if(i<questions.length) loadQ();
        else{
            document.getElementById("quiz").innerHTML="";
            document.getElementById("result").innerHTML=`ğŸ‰ HoÃ n thÃ nh<br>Äiá»ƒm: <b>${score}/${questions.length}</b>`;
            document.getElementById("backStudent").classList.remove("hidden");
            document.getElementById("bar").style.width="100%";
        }
    },600);
}
</script>
</body>
</html>
