<!DOCTYPE html>
<html lang="vi">
<head>
<meta charset="UTF-8">
<title>TED EXE FULL FIX</title>
<meta name="viewport" content="width=device-width,initial-scale=1">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">

<style>
:root{
--bg:#0b1020;--sidebar:#070b18;--card:#0f172a;
--border:#1e293b;--primary:#6366f1;--text:#e5e7eb
}
*{box-sizing:border-box}
body{margin:0;font-family:Segoe UI;background:var(--bg);color:var(--text)}
.wrapper{display:flex;height:100vh}

/* sidebar */
.sidebar{width:240px;background:var(--sidebar);border-right:1px solid var(--border);padding:20px}
.logo{text-align:center;font-size:22px;font-weight:900;color:var(--primary)}
.nav a{display:block;padding:12px;border-radius:10px;color:#cbd5f5;text-decoration:none;margin:6px 0;cursor:pointer}
.nav a:hover{background:var(--primary);color:#000}

/* main */
.main{flex:1;padding:20px;overflow:auto}
h2{margin-top:0}
.card{background:var(--card);border:1px solid var(--border);border-radius:16px;padding:16px;margin-bottom:14px}
.grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(220px,1fr));gap:14px}
.btn{padding:10px 14px;border-radius:12px;border:none;font-weight:700;cursor:pointer}
.btn-primary{background:var(--primary);color:#000}
.btn-danger{background:#ef4444;color:#fff}
.price{color:#22c55e;font-weight:800}
.hidden{display:none}
input,textarea{
width:100%;padding:10px;border-radius:10px;
background:#020617;border:1px solid var(--border);
color:#fff;margin-top:6px
}
small{opacity:.7}
</style>
</head>

<body>
<div class="wrapper">

<!-- SIDEBAR -->
<div class="sidebar">
<div class="logo">TED EXE</div>
<div class="nav">
<a onclick="view('shop')"><i class="fa fa-store"></i> Shop</a>
<a onclick="view('deposit')"><i class="fa fa-qrcode"></i> N·∫°p ti·ªÅn</a>
<a onclick="view('admin')"><i class="fa fa-user-shield"></i> Admin</a>
<a onclick="logout()"><i class="fa fa-sign-out"></i> Tho√°t</a>
</div>
</div>

<!-- MAIN -->
<div class="main">
<h2 id="title">LOGIN</h2>
<div id="info"></div>

<!-- LOGIN -->
<div id="login" class="card">
<h3>ƒêƒÉng nh·∫≠p / ƒêƒÉng k√Ω</h3>
<input id="user" placeholder="Username">
<input id="pass" type="password" placeholder="Password">
<button class="btn btn-primary" onclick="login()">V√†o h·ªá th·ªëng</button>
<small>Admin: ƒëƒÉng nh·∫≠p b·∫±ng username <b>admin</b></small>
</div>

<!-- SHOP -->
<div id="shop" class="hidden">
<div class="grid" id="products"></div>
</div>

<!-- DEPOSIT -->
<div id="deposit" class="hidden card">
<h3>N·∫°p ti·ªÅn</h3>
N·ªôi dung CK: <b id="ck"></b>
<input id="money" placeholder="S·ªë ti·ªÅn">
<button class="btn btn-primary" onclick="deposit()">G·ª≠i y√™u c·∫ßu</button>
<div id="depositList"></div>
</div>

<!-- ADMIN -->
<div id="admin" class="hidden">
<div class="card">
<h3>Th√™m s·∫£n ph·∫©m</h3>
<input id="pn" placeholder="T√™n s·∫£n ph·∫©m">
<textarea id="pd" placeholder="M√¥ t·∫£"></textarea>
<input id="pp" placeholder="Gi√°">
<button class="btn btn-primary" onclick="addProduct()">Th√™m</button>
</div>

<div class="card">
<h3>Qu·∫£n l√Ω user</h3>
<div id="users"></div>
</div>

<div class="card">
<h3>Duy·ªát n·∫°p</h3>
<div id="deposits"></div>
</div>
</div>

</div>
</div>

<script>
document.addEventListener("DOMContentLoaded",()=>{

const $=id=>document.getElementById(id)

const db={
users:JSON.parse(localStorage.users||"[]"),
products:JSON.parse(localStorage.products||JSON.stringify([
{name:"Nick Free Fire VIP",desc:"Rank cao ‚Äì Full skin",price:150000},
{name:"Nick Li√™n Qu√¢n",desc:"T∆∞·ªõng + skin hi·∫øm",price:200000},
{name:"Acc Genshin",desc:"5‚òÖ + v≈© kh√≠",price:500000}
])),
deposits:JSON.parse(localStorage.deposits||"[]"),
save(){
localStorage.users=JSON.stringify(this.users)
localStorage.products=JSON.stringify(this.products)
localStorage.deposits=JSON.stringify(this.deposits)
}
}

let me=null

window.login=function(){
const username=$("user").value.trim()
const password=$("pass").value
if(!username||!password) return alert("Thi·∫øu th√¥ng tin")

let u=db.users.find(x=>x.u===username)
if(!u){
u={u:username,p:password,m:0,role:username==="admin"?"admin":"user"}
db.users.push(u);db.save()
}

if(u.p!==password) return alert("Sai m·∫≠t kh·∫©u")
me=u
localStorage.session=username
$("login").classList.add("hidden")
$("ck").innerText=me.u
view("shop")
render()
}

window.view=function(v){
["shop","deposit","admin"].forEach(x=>$(x).classList.add("hidden"))
if(v==="admin" && me.role!=="admin") return alert("Kh√¥ng c√≥ quy·ªÅn admin")
$(v).classList.remove("hidden")
$("title").innerText=v.toUpperCase()
render()
}

function render(){
$("info").innerHTML=`üë§ ${me.u} | üí∞ ${me.m.toLocaleString()}ƒë`

$("products").innerHTML=db.products.map((p,i)=>`
<div class="card">
<h4>${p.name}</h4>
<p>${p.desc}</p>
<div class="price">${p.price.toLocaleString()}ƒë</div>
<button class="btn btn-primary" onclick="buy(${i})">Mua</button>
</div>`).join("")

$("depositList").innerHTML=db.deposits
.filter(d=>d.u===me.u)
.map(d=>`<div>${d.a.toLocaleString()}ƒë (ch·ªù duy·ªát)</div>`).join("")

$("users").innerHTML=db.users.map((u,i)=>`
<div>${u.u} ‚Äì ${u.m.toLocaleString()}ƒë
<button onclick="addMoney(${i})">+100k</button>
</div>`).join("")

$("deposits").innerHTML=db.deposits.map((d,i)=>`
<div>${d.u} ‚Äì ${d.a.toLocaleString()}ƒë
<button onclick="approve(${i})">Duy·ªát</button>
</div>`).join("")
}

window.buy=function(i){
const p=db.products[i]
if(me.m<p.price) return alert("Kh√¥ng ƒë·ªß ti·ªÅn")
me.m-=p.price
db.save();render()
alert("Mua th√†nh c√¥ng")
}

window.deposit=function(){
const a=+$("money").value
if(a<=0||isNaN(a)) return alert("S·ªë ti·ªÅn kh√¥ng h·ª£p l·ªá")
db.deposits.push({u:me.u,a})
db.save()
$("money").value=""
render()
alert("ƒê√£ g·ª≠i y√™u c·∫ßu n·∫°p")
}

window.approve=function(i){
const d=db.deposits[i]
const u=db.users.find(x=>x.u===d.u)
u.m+=d.a
db.deposits.splice(i,1)
db.save();render()
}

window.addMoney=function(i){
db.users[i].m+=100000
db.save();render()
}

window.addProduct=function(){
if(!$("pn").value||!$("pp").value) return alert("Thi·∫øu d·ªØ li·ªáu")
db.products.push({name:$("pn").value,desc:$("pd").value,price:+$("pp").value})
db.save();render()
$("pn").value=$("pd").value=$("pp").value=""
}

window.logout=function(){
localStorage.removeItem("session")
location.reload()
}

})
</script>
</body>
</html>
